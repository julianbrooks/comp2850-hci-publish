<!DOCTYPE HTML>
<html lang="en" class="navy sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lab 1: Server-first foundations with HTMX - COMP2850 ‚Ä¢ Human-Computer Interaction</title>


        <!-- Custom HTML head -->

        <meta name="description" content="HCI module covering server-first architecture, accessibility, privacy by design, and evaluation (Weeks 6-11)">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../css/admonish.css">
        <link rel="stylesheet" href="../css/custom.css">
        <link rel="stylesheet" href="../css/retro-theme.css">
        <link rel="stylesheet" href=".././mdbook-admonish.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "navy";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>‚Üê</kbd> or <kbd>‚Üí</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">COMP2850 ‚Ä¢ Human-Computer Interaction</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="week-6--lab-1-server-first-foundations-with-htmx"><a class="header" href="#week-6--lab-1-server-first-foundations-with-htmx">Week 6 ‚Ä¢ Lab 1: Server-First Foundations with HTMX</a></h1>
<p><img src="https://img.shields.io/badge/COMP2850-HCI-blue" alt="COMP2850" />
<img src="https://img.shields.io/badge/Week-6-orange" alt="Week 6" />
<img src="https://img.shields.io/badge/Lab-1-green" alt="Lab 1" />
<img src="https://img.shields.io/badge/Status-Draft-yellow" alt="Status" /></p>
<hr />
<h2 id="terminology-note"><a class="header" href="#terminology-note">Terminology Note</a></h2>
<p>Throughout COMP2850 we use <strong>people-centred language</strong> (e.g., "person using a screen reader") rather than deficit-based terms (e.g., "blind user"). This reflects contemporary inclusive-design practice and acknowledges that disability arises from environmental barriers, not individual impairment.</p>
<hr />
<h2 id="pre-reading"><a class="header" href="#pre-reading">Pre-reading</a></h2>
<p><strong>Essential</strong></p>
<ul>
<li><a href="https://hypermedia.systems/">Gross, Stepinski &amp; Ak≈üim≈üek (2023). <em>Hypermedia Systems</em>, Ch. 1-3</a></li>
<li><a href="https://htmx.org/docs/">HTMX Documentation: Core Concepts</a></li>
<li><a href="https://www.gov.uk/service-manual/technology/using-progressive-enhancement">GOV.UK Service Manual: Progressive Enhancement</a></li>
</ul>
<p><strong>Recommended</strong></p>
<ul>
<li><a href="https://www.w3.org/WAI/WCAG22/quickref/">W3C (2024). WCAG 2.2 Quick Reference</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Semantics#semantic_elements">MDN: Semantic HTML</a></li>
<li><a href="/references/privacy-by-design.html">Privacy by Design</a> (module-specific ethics guidance)</li>
</ul>
<blockquote>
<p><strong>Starter code</strong>: Clone the <a href="../../resources/code-resources.html#week-6">starter repository</a> or download the zip before the lab.</p>
</blockquote>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<h3 id="context"><a class="header" href="#context">Context</a></h3>
<p>This lab marks the beginning of the <strong>HCI component</strong> of COMP2850 (Weeks 6-11). For the first five weeks you built foundational Kotlin/OOP skills. Now you'll apply those skills to a real-world HCI challenge: building inclusive, accessible web applications using <strong>server-first architecture</strong> with <strong>progressive enhancement</strong>.</p>
<p>Modern web development often defaults to client-heavy JavaScript frameworks (React, Vue, Angular). While powerful, these approaches can create accessibility barriers:</p>
<ul>
<li>Screen readers struggle with dynamically-rendered content</li>
<li>Keyboard navigation breaks when focus management is incorrect</li>
<li>Customers with JavaScript disabled (corporate firewalls, data-saving modes) lose functionality</li>
<li>Development complexity increases, making accessibility fixes expensive to retrofit</li>
</ul>
<p><strong>Server-first architecture</strong> inverts this model: the server renders complete, semantic HTML that works <em>without</em> JavaScript. We then add HTMX as a <strong>progressive enhancement layer</strong> to improve interactivity without sacrificing the baseline experience.</p>
<h3 id="why-this-matters"><a class="header" href="#why-this-matters">Why This Matters</a></h3>
<p><strong>Professionally</strong>, server-first patterns are gaining traction in industry:</p>
<ul>
<li><strong>GOV.UK</strong> (UK government digital services) mandates progressive enhancement</li>
<li><strong>Basecamp</strong> (project management, 3M+ customers) uses server-rendered HTML + Turbo (similar to HTMX)</li>
<li><strong>GitHub</strong> serves primarily server-rendered HTML with JavaScript enhancements</li>
<li><strong>Stack Overflow</strong> is 90% server-rendered for performance and accessibility</li>
</ul>
<p><strong>Academically</strong>, this lab introduces core HCI concepts:</p>
<ul>
<li><strong>Inclusion by design</strong>: building accessibility into the foundation, not retrofitting it</li>
<li><strong>Progressive enhancement</strong>: layering capabilities so everyone gets a baseline experience</li>
<li><strong>Server-side rendering (SSR)</strong>: generating HTML on the server vs. client-side rendering (CSR)</li>
<li><strong>Hypermedia-driven architecture</strong>: using HTML as the engine of application state (HATEOAS)</li>
</ul>
<h2 id="learning-focus"><a class="header" href="#learning-focus">Learning Focus</a></h2>
<h3 id="lab-objectives"><a class="header" href="#lab-objectives">Lab Objectives</a></h3>
<p>By the end of this session, you will have:</p>
<ul>
<li>Implemented server-first routes using Ktor and Pebble templates</li>
<li>Enhanced a form with HTMX while maintaining no-JS functionality</li>
<li>Created accessible HTML with semantic structure, ARIA live regions, and skip links</li>
<li>Verified keyboard navigation, screen reader announcements, and no-JS parity</li>
</ul>
<h3 id="learning-outcomes-addressed"><a class="header" href="#learning-outcomes-addressed">Learning Outcomes Addressed</a></h3>
<p>This lab contributes to the following module Learning Outcomes (<a href="/references/learning-outcomes.html">full definitions</a>):</p>
<ul>
<li><strong>LO5</strong>: Create interface prototypes ‚Äî evidenced by functional HTMX task list</li>
<li><strong>LO7</strong>: Analyse design constraints ‚Äî evidenced by no-JS parity verification</li>
<li><strong>LO9</strong>: Apply inclusive design ‚Äî evidenced by semantic HTML + ARIA implementation</li>
<li><strong>LO13</strong>: Integrate HCI with SE ‚Äî evidenced by server-first architecture patterns</li>
</ul>
<hr />
<h2 id="key-concepts"><a class="header" href="#key-concepts">Key Concepts</a></h2>
<h3 id="1-server-first-architecture"><a class="header" href="#1-server-first-architecture">1. Server-First Architecture</a></h3>
<p><strong>Server-first</strong> (also called "server-side rendering" or SSR) means the server generates complete HTML pages and sends them to the browser. The browser displays them immediately without waiting for JavaScript to run.</p>
<p><strong>Example</strong>:</p>
<pre><code>Customer requests /tasks
‚Üí Server queries database
‚Üí Server renders tasks/index.peb template with data
‚Üí Server sends complete HTML to browser
‚Üí Browser displays page (works even if JS is disabled)
</code></pre>
<p><strong>Contrast with client-side rendering (CSR)</strong>:</p>
<pre><code>Customer requests /tasks
‚Üí Server sends empty HTML + JavaScript bundle
‚Üí Browser downloads and executes JS
‚Üí JS makes API call to /api/tasks
‚Üí JS renders HTML and inserts into DOM
‚ùå If JS fails to load, page is blank
</code></pre>
<p><strong>Benefits</strong>:</p>
<ul>
<li>‚úÖ Faster initial page load (no JS parsing delay)</li>
<li>‚úÖ Works without JavaScript (resilience)</li>
<li>‚úÖ Search engines can index content (SEO)</li>
<li>‚úÖ Screen readers receive semantic HTML immediately</li>
</ul>
<h3 id="2-progressive-enhancement"><a class="header" href="#2-progressive-enhancement">2. Progressive Enhancement</a></h3>
<p><strong>Progressive enhancement</strong> is a design philosophy: start with a baseline experience that works for everyone, then add enhancements for browsers that support them.</p>
<p><strong>Layers</strong>:</p>
<ol>
<li><strong>HTML</strong> (content layer): semantic markup, accessible by default</li>
<li><strong>CSS</strong> (presentation layer): styling, gracefully degrades if not supported</li>
<li><strong>JavaScript</strong> (behaviour layer): dynamic interactions, optional</li>
</ol>
<p><strong>Example (COMP2850 task manager)</strong>:</p>
<ul>
<li><strong>Baseline</strong>: Form POSTs to <code>/tasks</code>, server validates, redirects (PRG pattern)</li>
<li><strong>Enhancement</strong>: HTMX intercepts POST, swaps HTML fragment, no page reload</li>
</ul>
<p><strong>Key principle</strong>: JavaScript failure (network error, blocked script, unsupported browser) should not break core functionality.</p>
<h3 id="3-htmx-fundamentals"><a class="header" href="#3-htmx-fundamentals">3. HTMX Fundamentals</a></h3>
<p><strong>HTMX</strong> extends HTML with attributes that trigger AJAX requests and update the DOM. Instead of writing JavaScript, you declare behaviour in HTML.</p>
<p><strong>Core attributes</strong>:</p>
<div class="table-wrapper"><table><thead><tr><th>Attribute</th><th>Purpose</th><th>Example</th></tr></thead><tbody>
<tr><td><code>hx-get</code></td><td>HTTP GET request</td><td><code>&lt;button hx-get="/tasks/1"&gt;Load&lt;/button&gt;</code></td></tr>
<tr><td><code>hx-post</code></td><td>HTTP POST request</td><td><code>&lt;form hx-post="/tasks"&gt;</code></td></tr>
<tr><td><code>hx-target</code></td><td>Where to insert response</td><td><code>hx-target="#task-list"</code></td></tr>
<tr><td><code>hx-swap</code></td><td>How to insert response</td><td><code>hx-swap="beforeend"</code> (append), <code>hx-swap="outerHTML"</code> (replace)</td></tr>
<tr><td><code>hx-swap-oob</code></td><td>Out-of-band swap (update element not in target)</td><td><code>&lt;div id="status" hx-swap-oob="true"&gt;</code></td></tr>
</tbody></table>
</div>
<p><strong>How HTMX works</strong>:</p>
<ol>
<li>Customer triggers event (click, submit)</li>
<li>HTMX makes AJAX request to server</li>
<li>Server returns HTML fragment (not JSON)</li>
<li>HTMX swaps fragment into target element</li>
<li>Screen reader live regions announce changes</li>
</ol>
<p><strong>Why this helps accessibility</strong>:</p>
<ul>
<li>Server controls HTML structure (consistent semantics)</li>
<li>No manual DOM manipulation (reduces ARIA errors)</li>
<li>Live regions work automatically (if server includes them)</li>
</ul>
<h3 id="4-post-redirect-get-prg-pattern"><a class="header" href="#4-post-redirect-get-prg-pattern">4. Post-Redirect-Get (PRG) Pattern</a></h3>
<p><strong>Problem</strong>: If a person submits a form with POST and then refreshes the page, the browser re-submits the form
(duplicate submission).</p>
<p><strong>Solution</strong>: After processing a POST, return a redirect (HTTP 303) to a GET URL.</p>
<p><strong>Flow</strong>:</p>
<pre><code>1. Customer submits form ‚Üí POST /tasks (title="Buy milk")
2. Server validates, saves to database
3. Server returns: HTTP 303 See Other, Location: /tasks
4. Browser follows redirect ‚Üí GET /tasks
5. Server renders updated task list
6. Customer sees new task; refresh = safe GET (no duplicate)
</code></pre>
<p><strong>In Ktor</strong>:</p>
<pre><code class="language-kotlin">post("/tasks") {
    val title = call.receiveParameters()["title"].orEmpty().trim()
    if (title.isNotBlank()) {
        repo.add(title)
    }
    call.respondRedirect("/tasks") // PRG redirect
}
</code></pre>
<h3 id="5-aria-live-regions"><a class="header" href="#5-aria-live-regions">5. ARIA Live Regions</a></h3>
<p><strong>ARIA</strong> (Accessible Rich Internet Applications) provides attributes that help screen readers understand dynamic content.</p>
<p><strong>Live regions</strong> announce changes without moving focus. Essential for AJAX-updated content.</p>
<p><strong>Key attributes</strong>:</p>
<div class="table-wrapper"><table><thead><tr><th>Attribute</th><th>Purpose</th><th>Example</th></tr></thead><tbody>
<tr><td><code>role="status"</code></td><td>Announces non-critical updates</td><td><code>&lt;div role="status" aria-live="polite"&gt;Task added&lt;/div&gt;</code></td></tr>
<tr><td><code>role="alert"</code></td><td>Announces critical errors</td><td><code>&lt;div role="alert"&gt;Title is required&lt;/div&gt;</code></td></tr>
<tr><td><code>aria-live="polite"</code></td><td>Waits for customer to finish before announcing</td><td>Status messages</td></tr>
<tr><td><code>aria-live="assertive"</code></td><td>Interrupts to announce immediately</td><td>Error messages</td></tr>
</tbody></table>
</div>
<p><strong>Example (COMP2850 pattern)</strong>:</p>
<pre><code class="language-html">&lt;!-- In base.peb --&gt;
&lt;div id="status" role="status" aria-live="polite" class="visually-hidden"&gt;&lt;/div&gt;

&lt;!-- Server response (HTMX OOB swap) --&gt;
&lt;div id="status" hx-swap-oob="true"&gt;Task "Buy milk" added&lt;/div&gt;
</code></pre>
<p><strong>How it works</strong>:</p>
<ol>
<li>HTMX request completes</li>
<li>Server returns fragment + status div with <code>hx-swap-oob="true"</code></li>
<li>HTMX swaps main content <em>and</em> status div (out-of-band)</li>
<li>Screen reader detects status div change, announces "Task 'Buy milk' added"</li>
</ol>
<hr />
<h2 id="activity-1-project-setup--scaffold-inspection"><a class="header" href="#activity-1-project-setup--scaffold-inspection">Activity 1: Project Setup &amp; Scaffold Inspection</a></h2>
<p><strong>Time</strong>: 15 minutes
<strong>Materials</strong>: Starter pack (Gradle project with Ktor + Pebble)</p>
<blockquote>
<p>Keep the <a href="/references/pebble-cheatsheet.html">Pebble Cheatsheet</a> handy for syntax reminders.</p>
</blockquote>
<h3 id="step-1-clone-starter-pack"><a class="header" href="#step-1-clone-starter-pack">Step 1: Clone Starter Pack</a></h3>
<pre><code class="language-bash"># Clone starter repository (URL provided on Minerva)
git clone [REPO_URL]/comp2850-hci-starter.git
cd comp2850-hci-starter

# Or open in Codespaces: Click "Code" ‚Üí "Create codespace on main"
</code></pre>
<h3 id="step-2-verify-dependencies"><a class="header" href="#step-2-verify-dependencies">Step 2: Verify Dependencies</a></h3>
<p>Open <code>build.gradle.kts</code> and confirm these dependencies:</p>
<pre><code class="language-kotlin">dependencies {
    implementation("io.ktor:ktor-server-core:2.3.12")
    implementation("io.ktor:ktor-server-netty:2.3.12")
    implementation("io.pebbletemplates:pebble:3.2.2")
    implementation("ch.qos.logback:logback-classic:1.5.6")
}
</code></pre>
<p><strong>What these do</strong>:</p>
<ul>
<li><strong>Ktor</strong>: Kotlin web framework (routes, HTTP handling)</li>
<li><strong>Pebble</strong>: Template engine (renders HTML with data)</li>
<li><strong>Logback</strong>: Logging (debug server behaviour)</li>
</ul>
<h3 id="step-3-run-the-server"><a class="header" href="#step-3-run-the-server">Step 3: Run the Server</a></h3>
<pre><code class="language-bash">./gradlew run

# Windows
gradlew.bat run
</code></pre>
<p><strong>Expected output</strong>:</p>
<pre><code>Application started in 0.5s
Listening on http://0.0.0.0:8080
</code></pre>
<p><strong>Visit</strong>: http://localhost:8080/tasks</p>
<p>You should see placeholder text: "Task manager coming soon..." This confirms the server works.</p>
<h3 id="step-4-inspect-directory-structure"><a class="header" href="#step-4-inspect-directory-structure">Step 4: Inspect Directory Structure</a></h3>
<pre><code>comp2850-hci-starter/
‚îú‚îÄ‚îÄ src/main/kotlin/
‚îÇ   ‚îú‚îÄ‚îÄ Main.kt               # Server entry point
‚îÇ   ‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Task.kt           # Data model
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TaskRoutes.kt     # CRUD operations
‚îÇ   ‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TaskStore.kt      # CSV persistence
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ SessionUtils.kt   # Anonymous sessions
‚îú‚îÄ‚îÄ src/main/resources/
‚îÇ   ‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _layout/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ base.peb      # Accessible base layout
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tasks/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ index.peb     # Full page view
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ _list.peb     # Task list partial
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ _item.peb     # Single task partial
‚îÇ   ‚îî‚îÄ‚îÄ static/
‚îÇ       ‚îú‚îÄ‚îÄ css/custom.css    # WCAG styles
‚îÇ       ‚îî‚îÄ‚îÄ js/htmx-1.9.12.min.js
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ tasks.csv             # File-based storage
‚îú‚îÄ‚îÄ build.gradle.kts          # Dependencies
‚îî‚îÄ‚îÄ README.md                 # Comprehensive guide
</code></pre>
<p><strong>Stop and check</strong>:</p>
<ul>
<li>‚úÖ Server runs without errors</li>
<li>‚úÖ http://localhost:8080/tasks loads (even if placeholder)</li>
<li>‚úÖ You can see <code>base.peb</code> and <code>tasks/index.peb</code> in your IDE</li>
</ul>
<hr />
<h2 id="activity-2-build-accessible-base-layout"><a class="header" href="#activity-2-build-accessible-base-layout">Activity 2: Build Accessible Base Layout</a></h2>
<p><strong>Time</strong>: 30 minutes
<strong>Materials</strong>: <code>src/main/resources/templates/base.peb</code></p>
<h3 id="step-1-create-semantic-html-structure"><a class="header" href="#step-1-create-semantic-html-structure">Step 1: Create Semantic HTML Structure</a></h3>
<p>Replace the contents of <code>base.peb</code> with:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
  &lt;title&gt;{{ title | default("COMP2850 Task Manager") }}&lt;/title&gt;
  &lt;link rel="stylesheet" href="https://unpkg.com/@picocss/pico@2/css/pico.min.css"&gt;
  &lt;style&gt;
    /* Visually hidden but accessible to screen readers */
    .visually-hidden {
      position: absolute !important;
      clip: rect(1px, 1px, 1px, 1px);
      padding: 0 !important;
      border: 0 !important;
      height: 1px !important;
      width: 1px !important;
      overflow: hidden;
      white-space: nowrap;
    }

    /* Skip link (keyboard only) */
    .skip-link {
      position: absolute;
      left: -10000px;
      width: 1px;
      height: 1px;
      overflow: hidden;
    }
    .skip-link:focus {
      position: static;
      width: auto;
      height: auto;
      background: #1976d2;
      color: white;
      padding: 0.5rem 1rem;
      text-decoration: none;
      font-weight: bold;
    }

    /* ARIA live region styling */
    #status:not(:empty) {
      background: #e3f2fd;
      border-left: 4px solid #1976d2;
      padding: 1rem;
      margin: 1rem 0;
    }
  &lt;/style&gt;
  &lt;script src="https://unpkg.com/htmx.org@2.0.0"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;a href="#main" class="skip-link"&gt;Skip to main content&lt;/a&gt;

  &lt;main class="container" id="main"&gt;
    &lt;div id="status" role="status" aria-live="polite" class="visually-hidden"&gt;&lt;/div&gt;
    {% block content %}{% endblock %}
  &lt;/main&gt;

  &lt;footer class="container"&gt;
    &lt;p&gt;&lt;small&gt;COMP2850 HCI ‚Ä¢ University of Leeds ‚Ä¢ 2024/25&lt;/small&gt;&lt;/p&gt;
  &lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="step-2-understanding-the-accessibility-features"><a class="header" href="#step-2-understanding-the-accessibility-features">Step 2: Understanding the Accessibility Features</a></h3>
<p><strong>Skip link</strong> (line 35-36):</p>
<ul>
<li>Allows keyboard/SR to jump past repeated navigation</li>
<li>Hidden until focused (keyboard Tab reveals it)</li>
<li><strong>WCAG 2.4.1 (Bypass Blocks, A)</strong>: Mechanism to bypass repeated content</li>
</ul>
<p><strong>Live region</strong> (line 39):</p>
<ul>
<li><code>role="status"</code>: Announces updates without stealing focus</li>
<li><code>aria-live="polite"</code>: Waits for customer to pause before announcing</li>
<li><code>.visually-hidden</code>: Hidden visually but announced by SR</li>
<li><strong>WCAG 4.1.3 (Status Messages, AA)</strong>: Status messages programmatically announced</li>
</ul>
<p><strong>Semantic HTML</strong>:</p>
<ul>
<li><code>&lt;main&gt;</code>: Primary content landmark</li>
<li><code>&lt;footer&gt;</code>: Site information landmark</li>
<li><code>lang="en"</code>: Tells SR which language to use</li>
<li><strong>WCAG 1.3.1 (Info and Relationships, A)</strong>: Structure conveyed programmatically</li>
</ul>
<h3 id="step-3-test-the-base-layout"><a class="header" href="#step-3-test-the-base-layout">Step 3: Test the Base Layout</a></h3>
<p>Reload http://localhost:8080/tasks. You should still see placeholder text, but now:</p>
<ol>
<li><strong>Tab once</strong>: Skip link appears with blue background</li>
<li><strong>Press Enter on skip link</strong>: Focus jumps to <code>#main</code> (no effect yet, but will matter when we add navigation)</li>
<li><strong>Inspect with DevTools</strong>:
<ul>
<li>Open Elements panel</li>
<li>Find <code>&lt;div id="status"&gt;</code> with <code>role="status"</code> and <code>aria-live="polite"</code></li>
<li>Confirm <code>.visually-hidden</code> class applied</li>
</ul>
</li>
</ol>
<p><strong>Stop and check</strong>:</p>
<ul>
<li>‚úÖ Skip link appears on keyboard focus</li>
<li>‚úÖ Live region exists in DOM (empty for now)</li>
<li>‚úÖ Pico.css loaded (page has default styling)</li>
</ul>
<hr />
<h2 id="activity-3-implement-server-side-routes--repository"><a class="header" href="#activity-3-implement-server-side-routes--repository">Activity 3: Implement Server-Side Routes &amp; Repository</a></h2>
<p><strong>Time</strong>: 35 minutes
<strong>Materials</strong>: <code>src/main/kotlin/routes/TaskRoutes.kt</code>, <code>data/tasks.csv</code></p>
<h3 id="step-1-create-a-simple-repository"><a class="header" href="#step-1-create-a-simple-repository">Step 1: Create a Simple Repository</a></h3>
<p>Create <code>src/main/kotlin/data/TaskRepository.kt</code>:</p>
<pre><code class="language-kotlin">package data

import java.io.File
import java.util.concurrent.atomic.AtomicInteger

data class Task(val id: Int, var title: String)

object TaskRepository {
    private val file = File("data/tasks.csv")
    private val tasks = mutableListOf&lt;Task&gt;()
    private val idCounter = AtomicInteger(1)

    init {
        file.parentFile?.mkdirs()
        if (!file.exists()) {
            file.writeText("id,title\n")
        } else {
            file.readLines().drop(1).forEach { line -&gt;
                val parts = line.split(",", limit = 2)
                if (parts.size == 2) {
                    val id = parts[0].toIntOrNull() ?: return@forEach
                    tasks.add(Task(id, parts[1]))
                    idCounter.set(maxOf(idCounter.get(), id + 1))
                }
            }
        }
    }

    fun all(): List&lt;Task&gt; = tasks.toList()

    fun add(title: String): Task {
        val task = Task(idCounter.getAndIncrement(), title)
        tasks.add(task)
        persist()
        return task
    }

    fun delete(id: Int): Boolean {
        val removed = tasks.removeIf { it.id == id }
        if (removed) persist()
        return removed
    }

    private fun persist() {
        file.writeText("id,title\n" + tasks.joinToString("\n") { "${it.id},${it.title}" })
    }
}
</code></pre>
<p><strong>Why CSV?</strong></p>
<ul>
<li>Simple, inspectable, no database setup required</li>
<li>Good for learning (focus on HCI, not DB configuration)</li>
<li>Production apps would use PostgreSQL/MongoDB</li>
</ul>
<h3 id="step-2-create-baseline-routes-no-htmx-yet"><a class="header" href="#step-2-create-baseline-routes-no-htmx-yet">Step 2: Create Baseline Routes (No HTMX Yet)</a></h3>
<p>Edit <code>src/main/kotlin/routes/TaskRoutes.kt</code>:</p>
<pre><code class="language-kotlin">package routes

import data.TaskRepository
import io.ktor.http.*
import io.ktor.server.application.*
import io.ktor.server.request.*
import io.ktor.server.response.*
import io.ktor.server.routing.*
import io.pebbletemplates.pebble.PebbleEngine
import java.io.StringWriter

fun Route.taskRoutes() {
    val pebble = PebbleEngine.Builder().build()

    get("/tasks") {
        val model = mapOf(
            "title" to "Tasks",
            "tasks" to TaskRepository.all()
        )
        val template = pebble.getTemplate("templates/tasks/index.peb")
        val writer = StringWriter()
        template.evaluate(writer, model)
        call.respondText(writer.toString(), ContentType.Text.Html)
    }

    post("/tasks") {
        val title = call.receiveParameters()["title"].orEmpty().trim()
        if (title.isNotBlank()) {
            TaskRepository.add(title)
        }
        call.respondRedirect("/tasks") // PRG pattern
    }

    post("/tasks/{id}/delete") {
        val id = call.parameters["id"]?.toIntOrNull()
        id?.let { TaskRepository.delete(it) }
        call.respondRedirect("/tasks") // PRG pattern
    }
}
</code></pre>
<p><strong>Update <code>Application.kt</code></strong> (or wherever routing is configured):</p>
<pre><code class="language-kotlin">import io.ktor.server.application.*
import io.ktor.server.routing.*
import routes.taskRoutes

fun Application.module() {
    routing {
        taskRoutes()
    }
}
</code></pre>
<h3 id="step-3-create-task-list-template"><a class="header" href="#step-3-create-task-list-template">Step 3: Create Task List Template</a></h3>
<blockquote>
<p><strong>üí° Pebble Template Syntax Primer</strong></p>
<p>Pebble uses three types of delimiters:</p>
<div class="table-wrapper"><table><thead><tr><th>Syntax</th><th>Purpose</th><th>Example</th></tr></thead><tbody>
<tr><td><code>{{ variable }}</code></td><td><strong>Output</strong> - Print variable values</td><td><code>{{ task.title }}</code> outputs "Buy milk"</td></tr>
<tr><td><code>{% statement %}</code></td><td><strong>Logic</strong> - Control structures (if, for, extends)</td><td><code>{% for task in tasks %}...{% endfor %}</code></td></tr>
<tr><td><code>{# comment #}</code></td><td><strong>Comments</strong> - Not rendered in HTML</td><td><code>{# TODO: Add pagination #}</code></td></tr>
</tbody></table>
</div>
<p><strong>Common statements</strong>:</p>
<ul>
<li><code>{% extends "base.peb" %}</code> - Inherit from parent template</li>
<li><code>{% block content %}...{% endblock %}</code> - Define/override content sections</li>
<li><code>{% for item in list %}...{% endfor %}</code> - Loop over collections</li>
<li><code>{% if condition %}...{% endif %}</code> - Conditional rendering</li>
<li><code>{% else %}</code> - Inside <code>{% for %}</code>, shown if list is empty</li>
</ul>
<p><strong>Filters</strong> (pipe syntax):</p>
<ul>
<li><code>{{ tasks | length }}</code> - Get list size (outputs: <code>3</code>)</li>
<li><code>{{ title | escape }}</code> - HTML-escape (auto-enabled in Pebble)</li>
<li><code>{{ price | default(0) }}</code> - Fallback value if null</li>
</ul>
<p><strong>Reference</strong>: <a href="https://pebbletemplates.io/">Pebble Documentation</a> ‚Ä¢ <a href="/references/pebble-intro.html">Pebble Intro</a></p>
</blockquote>
<p>Edit <code>src/main/resources/templates/tasks/index.peb</code>:</p>
<pre><code class="language-html">{% extends "base.peb" %}

{% block content %}
&lt;h1&gt;Tasks&lt;/h1&gt;

&lt;section aria-labelledby="add-heading"&gt;
  &lt;h2 id="add-heading"&gt;Add a new task&lt;/h2&gt;
  &lt;form action="/tasks" method="post"&gt;
    &lt;label for="title"&gt;Title&lt;/label&gt;
    &lt;input type="text" id="title" name="title" required
           placeholder="e.g., Buy milk" aria-describedby="title-hint"&gt;
    &lt;small id="title-hint"&gt;Keep it short and specific.&lt;/small&gt;
    &lt;button type="submit"&gt;Add Task&lt;/button&gt;
  &lt;/form&gt;
&lt;/section&gt;

&lt;section aria-labelledby="list-heading"&gt;
  &lt;h2 id="list-heading"&gt;Current tasks ({{ tasks | length }})&lt;/h2&gt;
  &lt;ul id="task-list"&gt;
    {% for task in tasks %}
      &lt;li id="task-{{ task.id }}"&gt;
        &lt;span&gt;{{ task.title }}&lt;/span&gt;
        &lt;form action="/tasks/{{ task.id }}/delete" method="post" style="display: inline;"&gt;
          &lt;button type="submit" aria-label="Delete task: {{ task.title }}"&gt;Delete&lt;/button&gt;
        &lt;/form&gt;
      &lt;/li&gt;
    {% else %}
      &lt;li&gt;No tasks yet. Add one above!&lt;/li&gt;
    {% endfor %}
  &lt;/ul&gt;
&lt;/section&gt;
{% endblock %}
</code></pre>
<p><strong>Accessibility features</strong>:</p>
<ul>
<li><code>aria-labelledby</code>: Links sections to headings (SR announces "Add a new task, region")</li>
<li><code>aria-describedby</code>: Links input to hint (SR announces "Title, edit text, Keep it short and specific")</li>
<li><code>aria-label</code> on Delete button: SR announces "Delete task: Buy milk" (context-specific)</li>
<li>Semantic <code>&lt;section&gt;</code>, <code>&lt;h2&gt;</code>, <code>&lt;ul&gt;</code> structure</li>
</ul>
<h3 id="step-4-test-no-js-baseline"><a class="header" href="#step-4-test-no-js-baseline">Step 4: Test No-JS Baseline</a></h3>
<ol>
<li>
<p><strong>Disable JavaScript</strong> in browser:</p>
<ul>
<li>Chrome: DevTools (F12) ‚Üí Settings (‚öôÔ∏è) ‚Üí Debugger ‚Üí "Disable JavaScript"</li>
<li>Firefox: about:config ‚Üí javascript.enabled ‚Üí false</li>
</ul>
</li>
<li>
<p><strong>Reload http://localhost:8080/tasks</strong></p>
</li>
<li>
<p><strong>Add a task</strong>:</p>
<ul>
<li>Type "Buy milk" in Title field</li>
<li>Click "Add Task"</li>
<li><strong>Expected</strong>: Page reloads, "Buy milk" appears in list</li>
</ul>
</li>
<li>
<p><strong>Delete a task</strong>:</p>
<ul>
<li>Click "Delete" next to "Buy milk"</li>
<li><strong>Expected</strong>: Page reloads, task removed</li>
</ul>
</li>
</ol>
<p><strong>If this works, you have a fully functional, accessible baseline without any JavaScript.</strong></p>
<p><strong>Stop and check</strong>:</p>
<ul>
<li>‚úÖ Adding tasks works (no-JS)</li>
<li>‚úÖ Deleting tasks works (no-JS)</li>
<li>‚úÖ Page reloads on each action (PRG pattern)</li>
<li>‚úÖ Screen reader announces labels correctly (test with NVDA/VoiceOver if available)</li>
</ul>
<hr />
<h2 id="activity-4-add-htmx-progressive-enhancement"><a class="header" href="#activity-4-add-htmx-progressive-enhancement">Activity 4: Add HTMX Progressive Enhancement</a></h2>
<p><strong>Time</strong>: 40 minutes
<strong>Materials</strong>: Updated routes and templates</p>
<h3 id="step-1-detect-htmx-requests"><a class="header" href="#step-1-detect-htmx-requests">Step 1: Detect HTMX Requests</a></h3>
<p>Add helper function to <code>TaskRoutes.kt</code>:</p>
<pre><code class="language-kotlin">fun ApplicationCall.isHtmx(): Boolean =
    request.headers["HX-Request"]?.equals("true", ignoreCase = true) == true
</code></pre>
<p><strong>How it works</strong>: HTMX adds <code>HX-Request: true</code> header to all AJAX requests. Server checks this to decide whether to return full page or fragment.</p>
<h3 id="step-2-update-post-tasks-route"><a class="header" href="#step-2-update-post-tasks-route">Step 2: Update POST /tasks Route</a></h3>
<p>Replace <code>post("/tasks")</code> route with:</p>
<pre><code class="language-kotlin">post("/tasks") {
    val title = call.receiveParameters()["title"].orEmpty().trim()

    // Validation
    if (title.isBlank()) {
        if (call.isHtmx()) {
            val error = """&lt;div id="status" hx-swap-oob="true" role="alert" aria-live="assertive"&gt;
                Title is required. Please enter at least one character.
            &lt;/div&gt;"""
            return@post call.respondText(error, ContentType.Text.Html, HttpStatusCode.BadRequest)
        } else {
            // No-JS path: redirect with error flag (handle in GET if needed)
            return@post call.respondRedirect("/tasks?error=required")
        }
    }

    val task = TaskRepository.add(title)

    if (call.isHtmx()) {
        // Return HTML fragment for new task
        val fragment = """&lt;li id="task-${task.id}"&gt;
            &lt;span&gt;${task.title}&lt;/span&gt;
            &lt;form action="/tasks/${task.id}/delete" method="post" style="display: inline;"
                  hx-post="/tasks/${task.id}/delete"
                  hx-target="#task-${task.id}"
                  hx-swap="outerHTML"&gt;
              &lt;button type="submit" aria-label="Delete task: ${task.title}"&gt;Delete&lt;/button&gt;
            &lt;/form&gt;
        &lt;/li&gt;"""

        val status = """&lt;div id="status" hx-swap-oob="true"&gt;Task "${task.title}" added successfully.&lt;/div&gt;"""

        return@post call.respondText(fragment + status, ContentType.Text.Html, HttpStatusCode.Created)
    }

    call.respondRedirect("/tasks") // No-JS fallback
}
</code></pre>
<p><strong>Key pattern</strong>:</p>
<ul>
<li><strong>HTMX path</strong>: Returns <code>&lt;li&gt;</code> fragment + OOB status message</li>
<li><strong>No-JS path</strong>: Redirects to <code>/tasks</code> (page reload)</li>
<li>Both paths end up in the same state (DRY principle)</li>
</ul>
<h3 id="step-3-update-post-tasksiddelete-route"><a class="header" href="#step-3-update-post-tasksiddelete-route">Step 3: Update POST /tasks/{id}/delete Route</a></h3>
<pre><code class="language-kotlin">post("/tasks/{id}/delete") {
    val id = call.parameters["id"]?.toIntOrNull()
    val removed = id?.let { TaskRepository.delete(it) } ?: false

    if (call.isHtmx()) {
        val message = if (removed) "Task deleted." else "Could not delete task."
        val status = """&lt;div id="status" hx-swap-oob="true"&gt;$message&lt;/div&gt;"""
        // Return empty content to trigger outerHTML swap (removes the &lt;li&gt;)
        return@post call.respondText(status, ContentType.Text.Html)
    }

    call.respondRedirect("/tasks")
}
</code></pre>
<h3 id="step-4-add-htmx-attributes-to-template"><a class="header" href="#step-4-add-htmx-attributes-to-template">Step 4: Add HTMX Attributes to Template</a></h3>
<p>Update <code>tasks/index.peb</code>:</p>
<pre><code class="language-html">{% extends "base.peb" %}

{% block content %}
&lt;h1&gt;Tasks&lt;/h1&gt;

&lt;section aria-labelledby="add-heading"&gt;
  &lt;h2 id="add-heading"&gt;Add a new task&lt;/h2&gt;
  &lt;form action="/tasks" method="post"
        hx-post="/tasks"
        hx-target="#task-list"
        hx-swap="beforeend"&gt;
    &lt;label for="title"&gt;Title&lt;/label&gt;
    &lt;input type="text" id="title" name="title" required
           placeholder="e.g., Buy milk" aria-describedby="title-hint"&gt;
    &lt;small id="title-hint"&gt;Keep it short and specific.&lt;/small&gt;
    &lt;button type="submit"&gt;Add Task&lt;/button&gt;
  &lt;/form&gt;
&lt;/section&gt;

&lt;section aria-labelledby="list-heading"&gt;
  &lt;h2 id="list-heading"&gt;Current tasks ({{ tasks | length }})&lt;/h2&gt;
  &lt;ul id="task-list"&gt;
    {% for task in tasks %}
      &lt;li id="task-{{ task.id }}"&gt;
        &lt;span&gt;{{ task.title }}&lt;/span&gt;
        &lt;form action="/tasks/{{ task.id }}/delete" method="post" style="display: inline;"
              hx-post="/tasks/{{ task.id }}/delete"
              hx-target="#task-{{ task.id }}"
              hx-swap="outerHTML"&gt;
          &lt;button type="submit" aria-label="Delete task: {{ task.title }}"&gt;Delete&lt;/button&gt;
        &lt;/form&gt;
      &lt;/li&gt;
    {% else %}
      &lt;li&gt;No tasks yet. Add one above!&lt;/li&gt;
    {% endfor %}
  &lt;/ul&gt;
&lt;/section&gt;
{% endblock %}
</code></pre>
<p><strong>HTMX attributes explained</strong>:</p>
<ul>
<li>
<p><strong>Add form</strong>:</p>
<ul>
<li><code>hx-post="/tasks"</code>: AJAX POST on submit</li>
<li><code>hx-target="#task-list"</code>: Insert response into task list</li>
<li><code>hx-swap="beforeend"</code>: Append (not replace)</li>
</ul>
</li>
<li>
<p><strong>Delete form</strong>:</p>
<ul>
<li><code>hx-post="/tasks/{id}/delete"</code>: AJAX POST</li>
<li><code>hx-target="#task-{{ task.id }}"</code>: Target the specific <code>&lt;li&gt;</code></li>
<li><code>hx-swap="outerHTML"</code>: Replace entire <code>&lt;li&gt;</code> (removes it if response is empty)</li>
</ul>
</li>
</ul>
<h3 id="step-5-test-htmx-enhancement"><a class="header" href="#step-5-test-htmx-enhancement">Step 5: Test HTMX Enhancement</a></h3>
<ol>
<li>
<p><strong>Re-enable JavaScript</strong> in browser</p>
</li>
<li>
<p><strong>Reload http://localhost:8080/tasks</strong></p>
</li>
<li>
<p><strong>Add a task</strong>:</p>
<ul>
<li>Type "Buy oat milk"</li>
<li>Click "Add Task"</li>
<li><strong>Expected</strong>: Task appears instantly, NO page reload</li>
<li><strong>Check DevTools Network tab</strong>: See AJAX POST to <code>/tasks</code></li>
</ul>
</li>
<li>
<p><strong>Check live region announcement</strong>:</p>
<ul>
<li>Open browser console</li>
<li>Type: <code>document.getElementById('status').textContent</code></li>
<li><strong>Expected</strong>: "Task 'Buy oat milk' added successfully."</li>
<li><strong>With screen reader</strong>: Should announce this message</li>
</ul>
</li>
<li>
<p><strong>Delete a task</strong>:</p>
<ul>
<li>Click "Delete" next to "Buy oat milk"</li>
<li><strong>Expected</strong>: Task removed instantly, NO page reload</li>
</ul>
</li>
<li>
<p><strong>Verify no-JS still works</strong>:</p>
<ul>
<li>Disable JavaScript again</li>
<li>Repeat add/delete tests</li>
<li><strong>Expected</strong>: Both still work (page reloads)</li>
</ul>
</li>
</ol>
<p><strong>Stop and check</strong>:</p>
<ul>
<li>‚úÖ HTMX path: instant updates, no reload</li>
<li>‚úÖ No-JS path: still works with redirects</li>
<li>‚úÖ Live region updates (inspect with DevTools)</li>
<li>‚úÖ Network tab shows AJAX requests (JS enabled) vs. full page loads (JS disabled)</li>
</ul>
<hr />
<h2 id="activity-5-accessibility-verification"><a class="header" href="#activity-5-accessibility-verification">Activity 5: Accessibility Verification</a></h2>
<p><strong>Time</strong>: 25 minutes
<strong>Materials</strong>: Keyboard, screen reader (NVDA/VoiceOver), browser DevTools</p>
<h3 id="test-1-keyboard-navigation"><a class="header" href="#test-1-keyboard-navigation">Test 1: Keyboard Navigation</a></h3>
<p><strong>Enable JavaScript</strong>, reload page, then:</p>
<ol>
<li>
<p><strong>Tab through page</strong>:</p>
<ul>
<li>Tab 1: Skip link appears ‚Üí Press Enter ‚Üí Focus jumps to main</li>
<li>Tab 2: Title input</li>
<li>Tab 3: Add Task button</li>
<li>Tab 4: First Delete button</li>
<li>Continue tabbing through all Delete buttons</li>
</ul>
</li>
<li>
<p><strong>Check focus indicators</strong>:</p>
<ul>
<li>Pico.css provides default focus outlines</li>
<li>Ensure you can always see which element has focus</li>
</ul>
</li>
<li>
<p><strong>Submit form with keyboard</strong>:</p>
<ul>
<li>Focus Title input, type "Test task"</li>
<li>Press Enter (submits form)</li>
<li><strong>Expected</strong>: Task added via HTMX (no reload)</li>
</ul>
</li>
</ol>
<p><strong>Result</strong>: ‚úÖ All interactive elements keyboard-accessible</p>
<h3 id="test-2-screen-reader-testing"><a class="header" href="#test-2-screen-reader-testing">Test 2: Screen Reader Testing</a></h3>
<p><strong>Tools</strong>:</p>
<ul>
<li><strong>Windows</strong>: NVDA (free, https://www.nvaccess.org/)</li>
<li><strong>macOS</strong>: VoiceOver (built-in, Cmd+F5)</li>
<li><strong>Linux</strong>: Orca (pre-installed on RHEL labs)</li>
</ul>
<p><strong>Test with NVDA</strong> (Windows):</p>
<ol>
<li>Start NVDA (Ctrl+Alt+N)</li>
<li>Navigate to http://localhost:8080/tasks</li>
<li><strong>Listen for</strong>:
<ul>
<li>"Tasks, heading level 1"</li>
<li>"Add a new task, heading level 2"</li>
<li>"Title, edit, Keep it short and specific" (input + hint)</li>
</ul>
</li>
<li><strong>Type</strong> "NVDA test task" and press Enter</li>
<li><strong>Listen for</strong>: "Task 'NVDA test task' added successfully" (from live region)</li>
<li><strong>Tab to Delete button</strong>:
<ul>
<li><strong>Expected</strong>: "Delete task: NVDA test task, button"</li>
</ul>
</li>
<li><strong>Press Space</strong> (activates Delete)</li>
<li><strong>Listen for</strong>: "Task deleted" (from live region)</li>
</ol>
<p><strong>Result</strong>: ‚úÖ Screen reader announces labels, hints, and status messages</p>
<h3 id="test-3-no-js-parity"><a class="header" href="#test-3-no-js-parity">Test 3: No-JS Parity</a></h3>
<ol>
<li><strong>Disable JavaScript</strong> (DevTools ‚Üí Settings ‚Üí Disable JavaScript)</li>
<li><strong>Reload page</strong></li>
<li><strong>Add task</strong>: "No-JS test"
<ul>
<li><strong>Expected</strong>: Page reloads, task appears</li>
</ul>
</li>
<li><strong>Delete task</strong>:
<ul>
<li><strong>Expected</strong>: Page reloads, task removed</li>
</ul>
</li>
<li><strong>Compare with JS-enabled</strong>:
<ul>
<li>Functionality identical (only UX differs: reload vs. instant)</li>
</ul>
</li>
</ol>
<p><strong>Result</strong>: ‚úÖ No-JS parity achieved</p>
<h3 id="test-4-wcag-quick-check"><a class="header" href="#test-4-wcag-quick-check">Test 4: WCAG Quick Check</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Criterion</th><th>Test</th><th>Result</th></tr></thead><tbody>
<tr><td><strong>1.3.1 Info and Relationships (A)</strong></td><td>Inspect HTML: <code>&lt;label for="title"&gt;</code> links to <code>&lt;input id="title"&gt;</code></td><td>‚òê Pass</td></tr>
<tr><td><strong>2.1.1 Keyboard (A)</strong></td><td>All features accessible via Tab, Enter, Space</td><td>‚òê Pass</td></tr>
<tr><td><strong>2.4.1 Bypass Blocks (A)</strong></td><td>Skip link appears on focus, jumps to main</td><td>‚òê Pass</td></tr>
<tr><td><strong>3.2.2 On Input (A)</strong></td><td>Changing input doesn't auto-submit (only explicit button press)</td><td>‚òê Pass</td></tr>
<tr><td><strong>3.3.2 Labels or Instructions (A)</strong></td><td>All inputs have <code>&lt;label&gt;</code> and hint text</td><td>‚òê Pass</td></tr>
<tr><td><strong>4.1.3 Status Messages (AA)</strong></td><td>Live region announces add/delete confirmations</td><td>‚òê Pass</td></tr>
</tbody></table>
</div>
<p><strong>Stop and check</strong>:</p>
<ul>
<li>‚úÖ All WCAG tests pass</li>
<li>‚úÖ Keyboard and SR can complete all tasks</li>
<li>‚úÖ No-JS path works identically</li>
</ul>
<hr />
<h2 id="reflection-questions"><a class="header" href="#reflection-questions">Reflection Questions</a></h2>
<ol>
<li>
<p><strong>Server-first vs. client-first</strong>: How would this lab differ if we used React instead of server-rendered HTML + HTMX? What would be harder? What would be easier?</p>
</li>
<li>
<p><strong>Progressive enhancement</strong>: Imagine a person on a slow 3G connection where HTMX fails to load. How does our
implementation handle this gracefully?</p>
</li>
<li>
<p><strong>Live regions</strong>: Why do we use <code>aria-live="polite"</code> for success messages but <code>aria-live="assertive"</code> for errors? When would you choose one over the other?</p>
</li>
<li>
<p><strong>HTMX trade-offs</strong>: What are the limitations of HTMX compared to a full JavaScript framework? When might HTMX <em>not</em> be appropriate?</p>
</li>
</ol>
<hr />
<h2 id="further-reading"><a class="header" href="#further-reading">Further Reading</a></h2>
<p><strong>Server-first architecture</strong></p>
<ul>
<li>Gross, C., Stepinski, A., &amp; Ak≈üim≈üek, D. (2023). <em>Hypermedia Systems</em>. <a href="https://hypermedia.systems/">https://hypermedia.systems/</a></li>
</ul>
<p><strong>Progressive enhancement</strong></p>
<ul>
<li>GOV.UK Service Manual. "Using Progressive Enhancement." <a href="https://www.gov.uk/service-manual/technology/using-progressive-enhancement">https://www.gov.uk/service-manual/technology/using-progressive-enhancement</a></li>
<li>Champeon, S. (2003). "Progressive Enhancement and the Future of Web Design." SXSW presentation.</li>
</ul>
<p><strong>HTMX &amp; hypermedia</strong></p>
<ul>
<li>HTMX Documentation. <a href="https://htmx.org/docs/">https://htmx.org/docs/</a></li>
</ul>
<p><strong>WCAG &amp; accessibility</strong></p>
<ul>
<li>W3C (2024). <em>Web Content Accessibility Guidelines (WCAG) 2.2</em>. <a href="https://www.w3.org/WAI/WCAG22/quickref/">https://www.w3.org/WAI/WCAG22/quickref/</a></li>
<li>Pickering, H. (2016). <em>Inclusive Design Patterns</em>. Smashing Magazine.</li>
</ul>
<hr />
<h2 id="glossary-summary"><a class="header" href="#glossary-summary">Glossary Summary</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Term</th><th>Definition</th><th>Example/Context</th></tr></thead><tbody>
<tr><td><strong>Server-first</strong></td><td>Architecture where server generates complete HTML pages</td><td>Ktor renders <code>tasks/index.peb</code> ‚Üí sends full HTML to browser</td></tr>
<tr><td><strong>Progressive enhancement</strong></td><td>Building baseline (HTML) first, adding optional layers (CSS, JS)</td><td>Form works with POST/redirect; HTMX adds instant updates</td></tr>
<tr><td><strong>HTMX</strong></td><td>Library that adds AJAX capabilities via HTML attributes</td><td><code>&lt;form hx-post="/tasks" hx-target="#list"&gt;</code></td></tr>
<tr><td><strong>PRG (Post-Redirect-Get)</strong></td><td>Pattern to prevent duplicate form submissions</td><td>POST /tasks ‚Üí 303 Redirect ‚Üí GET /tasks</td></tr>
<tr><td><strong>ARIA live region</strong></td><td>Element that announces dynamic changes to screen readers</td><td><code>&lt;div role="status" aria-live="polite"&gt;</code></td></tr>
<tr><td><strong>Out-of-band (OOB) swap</strong></td><td>HTMX updating an element outside the main target</td><td><code>&lt;div id="status" hx-swap-oob="true"&gt;</code></td></tr>
<tr><td><strong>Semantic HTML</strong></td><td>Using tags that convey meaning (not just structure)</td><td><code>&lt;main&gt;</code>, <code>&lt;section&gt;</code>, <code>&lt;label&gt;</code>, <code>&lt;button&gt;</code> (not <code>&lt;div onclick&gt;</code>)</td></tr>
<tr><td><strong>Skip link</strong></td><td>Link to jump past repeated content (navigation)</td><td><code>&lt;a href="#main"&gt;Skip to content&lt;/a&gt;</code></td></tr>
<tr><td><strong>WCAG 2.2 AA</strong></td><td>Web accessibility standard (Level AA = target for most orgs)</td><td>GOV.UK, universities, large companies must comply</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="git-commit-best-practices"><a class="header" href="#git-commit-best-practices">Git Commit Best Practices</a></h2>
<p>Good commit messages are essential for your <strong>portfolio assessment</strong> and <strong>professional practice</strong>. Your commits tell the story of your development process.</p>
<h3 id="conventional-commit-format"><a class="header" href="#conventional-commit-format">Conventional Commit Format</a></h3>
<p>Use this structure for clear, searchable commits:</p>
<pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;short description&gt;

[Optional longer explanation]
</code></pre>
<p><strong>Examples</strong>:</p>
<pre><code class="language-bash"># Good ‚úÖ
git commit -m "feat(tasks): add HTMX progressive enhancement to delete button"
git commit -m "fix(a11y): add aria-label to delete buttons for screen readers"
git commit -m "docs(readme): add setup instructions for Codespaces"
git commit -m "refactor(templates): extract task item to partial template"

# Bad ‚ùå
git commit -m "stuff"
git commit -m "fixed it"
git commit -m "update"
git commit -m "changes"
</code></pre>
<h3 id="common-types"><a class="header" href="#common-types">Common Types</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Type</th><th>When to Use</th><th>Example</th></tr></thead><tbody>
<tr><td><code>feat</code></td><td>New feature or capability</td><td><code>feat(tasks): add search by title</code></td></tr>
<tr><td><code>fix</code></td><td>Bug fix</td><td><code>fix(validation): prevent blank task titles</code></td></tr>
<tr><td><code>refactor</code></td><td>Code restructure (no behaviour change)</td><td><code>refactor(store): move CSV logic to TaskStore class</code></td></tr>
<tr><td><code>docs</code></td><td>Documentation only</td><td><code>docs(readme): add IntelliJ setup guide</code></td></tr>
<tr><td><code>style</code></td><td>Formatting, CSS, no code change</td><td><code>style(tasks): improve focus indicator contrast</code></td></tr>
<tr><td><code>test</code></td><td>Adding or fixing tests</td><td><code>test(store): add TaskStore CRUD tests</code></td></tr>
<tr><td><code>chore</code></td><td>Build, dependencies, tooling</td><td><code>chore(deps): update Ktor to 2.3.11</code></td></tr>
</tbody></table>
</div>
<h3 id="scope-optional-but-helpful"><a class="header" href="#scope-optional-but-helpful">Scope (Optional but Helpful)</a></h3>
<p>Scope = which part of the codebase changed:</p>
<ul>
<li><code>(tasks)</code> = Task management feature</li>
<li><code>(a11y)</code> = Accessibility improvements</li>
<li><code>(htmx)</code> = HTMX enhancements</li>
<li><code>(templates)</code> = Pebble template changes</li>
<li><code>(docs)</code> = Documentation</li>
<li><code>(store)</code> = Data storage/persistence</li>
</ul>
<h3 id="why-this-matters-1"><a class="header" href="#why-this-matters-1">Why This Matters</a></h3>
<p><strong>For portfolio assessment</strong>:</p>
<ul>
<li>Demonstrates professional development practices</li>
<li>Shows your understanding of changes (not just "what" but "why")</li>
<li>Makes it easy to find specific features when preparing evidence</li>
</ul>
<p><strong>For collaboration</strong>:</p>
<ul>
<li>Team members understand changes at a glance</li>
<li>Easy to search git history (<code>git log --grep="feat(a11y)"</code>)</li>
<li>Tools can auto-generate changelogs from commit messages</li>
</ul>
<h3 id="week-6-lab-1-example-commit"><a class="header" href="#week-6-lab-1-example-commit">Week 6 Lab 1 Example Commit</a></h3>
<p>For this lab, a good commit message would be:</p>
<pre><code class="language-bash">git add src/main/kotlin/ src/main/resources/templates/ build.gradle.kts
git commit -m "feat(scaffold): implement server-first task manager with HTMX

- Add Ktor server with Pebble templating
- Implement TaskStore with CSV persistence
- Add dual-mode CRUD routes (HTMX + no-JS)
- Include WCAG 2.2 AA accessibility baseline (skip link, ARIA live region)
- Add progressive enhancement with HTMX for add/delete
- Tested with keyboard navigation and NVDA screen reader

Addresses Week 6 Lab 1 requirements.
WCAG: 2.4.1 (skip link), 4.1.3 (status messages)"
</code></pre>
<p><strong>Quick version</strong> (for smaller changes):</p>
<pre><code class="language-bash">git commit -m "feat(wk6-lab1): server-first scaffold with HTMX and WCAG 2.2 AA"
</code></pre>
<hr />
<h2 id="lab-checklist"><a class="header" href="#lab-checklist">Lab Checklist</a></h2>
<p>Before leaving lab, confirm:</p>
<ul>
<li><input disabled="" type="checkbox"/>
<strong>Server runs</strong>: <code>./gradlew run</code> ‚Üí http://localhost:8080/tasks loads</li>
<li><input disabled="" type="checkbox"/>
<strong>No-JS works</strong>: Add/delete tasks with JS disabled (page reloads)</li>
<li><input disabled="" type="checkbox"/>
<strong>HTMX works</strong>: Add/delete tasks with JS enabled (no reloads)</li>
<li><input disabled="" type="checkbox"/>
<strong>Keyboard accessible</strong>: Tab through all controls, submit with Enter</li>
<li><input disabled="" type="checkbox"/>
<strong>Screen reader tested</strong>: Labels, hints, and status messages announced (NVDA/VoiceOver)</li>
<li><input disabled="" type="checkbox"/>
<strong>Live region updates</strong>: Inspect DevTools ‚Üí <code>#status</code> text changes after add/delete</li>
<li><input disabled="" type="checkbox"/>
<strong>Code committed</strong>: <code>git add .</code>, <code>git commit -m "wk6-lab1: server-first scaffold with HTMX"</code></li>
</ul>
<hr />
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<p>In <strong>Week 6 Lab 2</strong> you will:</p>
<ol>
<li>Conduct peer interviews (needs-finding)</li>
<li>Document consent protocol (ethics)</li>
<li>Build an inclusive backlog from research insights</li>
<li>Plan instrumentation for Week 9 evaluation</li>
</ol>
<p><strong>Preparation</strong>:</p>
<ul>
<li>Read <a href="/references/consent-pii-faq.html">Consent &amp; PII FAQ</a> and <a href="/references/privacy-by-design.html">Privacy by Design</a></li>
<li>Bring laptop with working scaffold (Lab 1 code)</li>
<li>Be ready to pair with a classmate for interviews</li>
</ul>
<hr />
<p><strong>Lab authored by</strong>: COMP2850 Teaching Team, University of Leeds
<strong>Last updated</strong>: 2025-01-14
<strong>Licence</strong>: Academic use only (not for redistribution)</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../wk06/wk6-lab2-needs-consent-backlog.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../wk06/wk6-lab2-needs-consent-backlog.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
